import base64
exec(base64.b64decode(b'JycnCiAgIERFVk9MT1BFUiBNUiAtIEFTUkFGVUwKLS0tIEZZTEwgVVBEQVRFRAotLS0gR0lWRSBodHRwczovL3QubWUvS0dGX1RFUk1VWF9URUFNCicnJwppbXBvcnQgb3Msc3lzLHV1aWQscmUscmFuZG9tLHRpbWUsc3RyaW5nLGpzb24KCnRyeToKICAgIGltcG9ydCByZXF1ZXN0cyxyaWNoCmV4Y2VwdDoKICAgIG9zLnN5c3RlbSgicGlwMyBpbnN0YWxsIHJlcXVlc3RzIHJpY2giKQogICAgaW1wb3J0IHJlcXVlc3RzLHJpY2gKCmZyb20gcmljaCBpbXBvcnQgcHJpbnQKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBUaHJlYWRQb29sCgp2ZXJzaW9uPSJ2NSIKQSA9ICdceDFiWzE7OTdtJztSID0gJ1x4MWJbMzg7NTsxOTZtJztZID0gJ1wwMzNbMTszM20nO0cgPSAnXHgxYlszODs1OzQ2bSc7RzEgPSAnXHgxYlszODs1OzQ2bSc7RzIgPSAnXHgxYlszODs1OzQ3bSc7RzMgPSAnXHgxYlszODs1OzQ4bSc7RzQgPSAnXHgxYlszODs1OzQ5bSc7RzUgPSAnXHgxYlszODs1OzUwbSc7WCA9ICdcMzNbMTszNG0nO1gxID0gJ1x4MWJbMzg7NTsxNG0nO1gyID0gJ1x4MWJbMzg7NTsxMjNtJztYMyA9ICdceDFiWzM4OzU7MTIybSc7WDQgPSAnXHgxYlszODs1Ozg2bSc7WDUgPSAnXHgxYlszODs1OzEyMW0nO1MgPSAnXHgxYlsxOzk2bSc7VyA9ICdceDFiWzM4OzU7MTk2bSc7aGggPSAnXDAzM1szNDsxbScKY2xhc3Mgc29ydDoKICAgIGRlZiBsaW5lKCk6CiAgICAgICAgcmV0dXJuICJbYiBkYXJrX3NlYV9ncmVlbjJd4pSBIiozNwogICAgICAgIAogICAgZGVmIGNsZWFyKCk6CiAgICAgICAgb3Muc3lzdGVtKCJjbGVhciIpCiAgICAKICAgIGRlZiBsb2dvKCk6CiAgICAgICAgYWNpPWYnJycKW3JlZDFdIyMjIyMjIyMgIyMgICAgICMjICAjIyMjIyMgICAgICMjIyAgICAjIyMjIyMjIyAgCltyZWQxXSAgICMjICAgICMjICAgICAjIyAjIyAgICAjIyAgICMjICMjICAgIyMgICAgICMjIApbcmVkMV0gICAjIyAgICAjIyAgICAgIyMgIyMgICAgICAgICMjICAgIyMgICMjICAgICAjIyAKW3JlZDFdICAgIyMgICAgIyMgICAgICMjICAjIyMjIyMgICMjICAgICAjIyAjIyMjIyMjIyAgCltyZWQxXSAgICMjICAgICMjICAgICAjIyAgICAgICAjIyAjIyMjIyMjIyMgIyMgICAjIyAgIApbcmVkMV0gICAjIyAgICAjIyAgICAgIyMgIyMgICAgIyMgIyMgICAgICMjICMjICAgICMjICAKW3JlZDFdICAgIyMgICAgICMjIyMjIyMgICAjIyMjIyMgICMjICAgICAjIyAjIyAgICAgIyMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgClxuW3JlZDFde3NvcnQubGluZSgpfVxuICAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXURldmVsb3BlciBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV1UVVNBUlxuICAgICBbcmVkMV3inJcgW2xpZ2h0X2dyZWVuXVN0YXR1cyAgIAogICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdIFBBSUQg4p6kIFtvcmFuZ2UzXeKchQogW29yYW5nZTNd4pyFICBbbWVkaXVtX3B1cnBsZTFdW3JdMDE3NDU5ODEzMjlbL3JdXG5bcmVkMV17c29ydC5saW5lKCl9JycnCiAgICAgICAgcHJpbnQoYWNpKQogICAgCiAgICBkZWYgY29sb3IoKToKICAgICAgICBjbz1bJ1x4MWJbMTs5M20nLCdceDFiWzE7OTFtJywnXHgxYlsxOzk0bScsJ1x4MWJbMTs5NW0nLCdceDFiWzE7OTZtJ10KICAgICAgICBjeD1yYW5kb20uY2hvaWNlKGNvKQogICAgICAgIHJldHVybiBjeAoKCmRlZiBpbmZvKCk6CiAgICBzb3J0LmNsZWFyKCkKICAgIHByaW50KCcgICAgIFtiXSAgICBbcmVkMV0gV0VMQ09NRSBUTyBUVVNBUiBLSU5HIFRPT0wgICAgICAgICAgJykKICAgIHRpbWUuc2xlZXAoNCkKICAgIHNvcnQuY2xlYXIoKQogICAgCiMtLS0tLS0tLS0jIEdsb2JhbApva3M9W10KbG9vcD0wCgpkZWYgY29udChsaSk6CiAgICBpZiBsaSA8MTA6CiAgICAgICAgcmV0dXJuICIwIitzdHIobGkpCiAgICBlbHNlOgogICAgICAgIHJldHVybiBzdHIobGkpCiMtLS0tLS0tLS0jIERhdGUKbW9udGg9eyIwMSI6IkphbnVhcnkiLCIwMiI6IkZlYnJ1YXJ5IiwiMDMiOiJNYXJjaCIsIjA0IjoiQXByaWwiLCIwNSI6Ik1heSIsIjA2IjoiSnVuZSIsIjA3IjoiSnVseSIsIjA4IjoiQXVndXN0IiwiMDkiOiJTZXB0ZW1iZXIiLCIxMCI6Ik9jdG9iZXIiLCIxMSI6Ik5vdmVtYmVyIiwiMTIiOiJEZWNlbWJlciIsfQp0b2RheV9kYXRhPXN0cihkYXRldGltZS5ub3coKSkuc3BsaXQoIiAiKVswXS5zcGxpdCgiLSIpCnRvZGF5PXRvZGF5X2RhdGFbMl0rIlx4MWJbMTs5N20uIittb250aC5nZXQodG9kYXlfZGF0YVsxXSkKIy0tLS0tLS0tLSNPbGQgRGF0ZQpkZWYgdWEoKToKICAgIHJyPXJhbmRvbS5yYW5kaW50CiAgICBhWj1yYW5kb20uY2hvaWNlKFsnQScsJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXSkKICAgIHJ4PXJhbmRvbS5yYW5kcmFuZ2UoMSwgOTk5KQogICAgeHg9ZiJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyB7c3RyKHJyKDksMTEpKX07IFdpbjY0OyB4NjQpe3N0cihhWil9e3N0cihyeCl9e3N0cihhWil9KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKXtzdHIocnIoOTksMTQ5KSl9LjAue3N0cihycig0NTAwLDQ5OTkpKX0ue3N0cihycigzNSw5OSkpfSBDaHJvbWUve3N0cihycig5OSwxNzUpKX0uMC57c3RyKHJyKDAsNSkpfS57c3RyKHJyKDAsNSkpfSBTYWZhcmkvNTM3LjM2IgogICAgcmV0dXJuIHh4CgpkZWYgc2Ftc3VuZygpOgogICAgYW5kZXJzb249cmFuZG9tLmNob2ljZShbIjEwIiwiMTMiLCI3LjAuMCIsIjcuMS4xIiwiOSIsIjEyIiwiMTEiLCI5LjAiLCI4LjAuMCIsIjcuMS4yIiwiNy4wIiwiNCIsIjUiLCI0LjQuMiIsIjUuMS4xIiwiNi4wLjEiLCI5LjAuMSJdKQogICAgbW9kZWw9cmFuZG9tLmNob2ljZShbIkdULUk5NTA1IiwiU00tVDgzNSIsIlNNLVM5MDFVIiwiTU1CMjlLIiwiU00tUzEzNERMIiwiU00tSjI1MEYiLCJTTS1BMjE3RiIsIlNNLUEzMjZCIiwiU00tQTEyNUYiLCJTTS1BNzIwRiIsIlNNLUEzMjZVIiwiU00tRzUzMk0iLCJTTS1KNDEwRyIsIlNNLUEyMDVHTiIsIlNNLUEyMDVHTiIsIlNNLUE1MDVHTiIsIlNNLUc5MzBGIiwiU00tSjIxMEYiLCJTTS1OOTAwNSIsIlNNLUoyMTBGIl0pCiAgICB2aXI9c3RyKHJhbmRvbS5jaG9pY2UocmFuZ2UoMTExMTExMTExLDk5OTk5OTk5OSkpKQogICAgY2hvPXN0cihyYW5kb20uY2hvaWNlKHJhbmdlKDQzLDQ0NykpKQogICAgZmI9cmFuZG9tLmNob2ljZShbImNvbS5mYWNlYm9vay5hZHNtYW5hZ2VyfE1vYmlsZUFkc01hbmFnZXJBbmRyb2lkIiwiY29tLmZhY2Vib29rLmthdGFuYXxGQjRBIiwiY29tLmZhY2Vib29rLm9yY2F8T3JjYS1BbmRyb2lkIiwiY29tLmZhY2Vib29rLm1saXRlfE1lc3NlbmdlckxpdGUiXSkKICAgIEZCQU49ZmIuc3BsaXQoInwiKVsxXQogICAgcGxhdGZvcm09ZmIuc3BsaXQoInwiKVswXQogICAgdWE9ZiJEYWx2aWsvMi4xLjAgKExpbnV4OyBVOyBBbmRyb2lkICIrYW5kZXJzb24rIjsgIittb2RlbCsiIEJ1aWxkL0xSWDIyQykgW0ZCQU4vIitGQkFOKyI7RkJBVi8iK2NobysiLjAuMC4xNS44OTtGQlBOLyIrcGxhdGZvcm0rIjtGQkxDL3N2X1NFO0ZCQlYvIit2aXIrIjtGQkNSL1MgQ09NVklRO0ZCTUYvc2Ftc3VuZztGQkJEL3NhbXN1bmc7RkJEVi8iK21vZGVsKyI7RkJTVi81LjAuMTtGQkNBL2FybWVhYmktdjdhOmFybWVhYmk7RkJETS97ZGVuc2l0eT0iK3N0cihyYW5kb20uY2hvaWNlKHJhbmdlKDEsNCkpKSsiLjAsd2lkdGg9IitzdHIocmFuZG9tLmNob2ljZShyYW5nZSg3MjAsMTUwMCkpKSsiLGhlaWdodD0iK3N0cihyYW5kb20uY2hvaWNlKHJhbmdlKDE1MDAsMjAwMCkpKSsifTtGQl9GVy8xO10iCiAgICByZXR1cm4gdWEKCgojLS0tLS0tLS0tLS0jCmRlZiB1c2VyYWcxKCk6CiAgICBmYl92MT1zdHIocmFuZG9tLmNob2ljZShyYW5nZSgxMTEsNTU1KSkpIyAiK2ZiX3YxKyIKICAgIGZiX3YyPXN0cihyYW5kb20uY2hvaWNlKHJhbmdlKDExMSw1NTUpKSkKICAgIHJkcDE9c3RyKHJhbmRvbS5jaG9pY2UocmFuZ2UoMTExMTExMTExLDMzMzMzMzMzMykpKSMgIityZHAxKyIKICAgIHJkcDI9c3RyKHJhbmRvbS5jaG9pY2UocmFuZ2UoMTExMTExMTExLDMzMzMzMzMzMykpKQogICAgYW5kdj1zdHIocmFuZG9tLmNob2ljZShyYW5nZSg4LDEyKSkpIyAiK2FuZHYrIgogICAgIyBtb2Rvcm9sYQogICAgdWE9IkRhbHZpay8yLjEuMCAoTGludXg7IFU7IEFuZHJvaWQgIithbmR2KyIuMC4wOyBtb3RvIGU1IHBsdXMgQnVpbGQvT1BQUzI3LjkxLTE3OS04LTE2KSBbRkJBTi9GQjRBO0ZCQVYvIitmYl92MSsiLjAuMC41MC4iK2ZiX3YyKyI7RkJQTi9jb20uZmFjZWJvb2sua2F0YW5hO0ZCTEMvZXNfTVg7RkJCVi8iK3JkcDErIjtGQkNSL251bGw7RkJNRi9tb3Rvcm9sYTtGQkJEL21vdG9yb2xhO0ZCRFYvbW90byBlNSBwbHVzO0ZCU1YvIithbmR2KyIuMC4wO0ZCQ0EvYXJtZWFiaS12N2E6YXJtZWFiaTtGQkRNL3tkZW5zaXR5PTEuNyx3aWR0aD03MjAsaGVpZ2h0PTEzNTh9O0ZCX0ZXLzE7RkJSVi8wO10iCiAgICAKICAgIAogICAgcmV0dXJuIHVhCgpkZWYgdXNlcmFnMigpOgogICAgZmJfdjE9c3RyKHJhbmRvbS5jaG9pY2UocmFuZ2UoMTExLDU1NSkpKSMgIitmYl92MSsiCiAgICBmYl92Mj1zdHIocmFuZG9tLmNob2ljZShyYW5nZSgxMTEsNTU1KSkpCiAgICByZHAxPXN0cihyYW5kb20uY2hvaWNlKHJhbmdlKDExMTExMTExMSw0MzMzMzMzMzMpKSkjICIrcmRwMSsiCiAgICByZHAyPXN0cihyYW5kb20uY2hvaWNlKHJhbmdlKDExMTExMTExMSw0MzMzMzMzMzMpKSkKICAgIGFuZHY9c3RyKHJhbmRvbS5jaG9pY2UocmFuZ2UoOCwxMikpKSMgIithbmR2KyIKICAgICN2aXZvCiAgICB1YT0iRGFsdmlrLzIuMS4wIChMaW51eDsgVTsgQW5kcm9pZCAiK2FuZHYrIi4xLjE7IHZpdm8gVjNNYXggQnVpbGQvTE1ZNDdWKSBbRkJBTi9PcmNhLUFuZHJvaWQ7RkJBVi8iK2ZiX3YxKyIuMC4wLjE2LiIrZmJfdjIrIjtGQlBOL2NvbS5mYWNlYm9vay5vcmNhO0ZCTEMvZW5fVVM7RkJCVi8iK3JkcDErIjtGQkNSL251bGw7RkJNRi92aXZvO0ZCQkQvdml2bztGQkRWL3Zpdm8gVjNNYXg7RkJTVi8iK2FuZHYrIi4xLjE7RkJDQS9hcm1lYWJpLXY3YTphcm1lYWJpO0ZCRE0ve2RlbnNpdHk9My4wLHdpZHRoPTEwODAsaGVpZ2h0PTE5MjAiCiAgICAKICAgIAogICAgcmV0dXJuIHVhCgoKCiMtLS0tLS0tLS0tLSMKCgpkZWYgb2xkKCk6CiAgICB1c2VyPVtdCiAgICBzb3J0LmNsZWFyKCkKICAgIHNvcnQubG9nbygpCiAgICBwcmludCgiW2JdICAgIFtyZWQxXVtBXSBbc2VhX2dyZWVuMl1DcmFjayAyMDExLTE0IElkIikKICAgIHByaW50KCJbYl0gICAgW3JlZDFdW0JdIFtzcHJpbmdfZ3JlZW4xXUNyYWNrIDIwMDktMTAgSWQiKQogICAgcHJpbnQgKCJbYl0gICBbcmVkMV1bR0lGVF0gW3NwcmluZ19ncmVlbjFdIGh0dHBzOi8vdC5tZS9LR0ZfVEVSTVVYX1RFQU0iKQogICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICBhc2s9aW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKQoKICAgIGlmIGFzayBpbiBbIjEiLCIwMSIsImEiLCJBIl06CiAgICAgICAgcHJpbnQoIiBbYl0gICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1TZWxlY3RlZCAgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdVWlkIDIwMTEtMTQiKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIHByaW50KCJbYl0gICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdRXhhbXBsZSAgIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXTEwMDAwMCwgMjAwMDAwIikKICAgICAgICBsaW1pdD1pbnQoaW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKSkKICAgICAgICBwcmludChzb3J0LmxpbmUoKSkKICAgICAgICBzdGFyPSIxMDAwMCIKICAgICAgICBmb3IgaSBpbiByYW5nZShsaW1pdCk6CiAgICAgICAgICAgIGRhdGE9c3RyKHJhbmRvbS5jaG9pY2UocmFuZ2UoMTAwMDAwMDAwMCw5OTk5OTk5OTk5KSkpCiAgICAgICAgICAgIHVzZXIuYXBwZW5kKGRhdGEpCiAgICBlbHNlOgogICAgICAgIHN0YXI9IjEwMDAwMCIKICAgICAgICBwcmludCgiIFtiXSAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXVNlbGVjdGVkICBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV1VaWQgMjAwOS0xMCIpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgcHJpbnQoIiAgW2JdICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1FeGFtcGxlICAgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdMTAwMDAwLCAyMDAwMDAiKQogICAgICAgIGxpbWl0PWludChpbnB1dCgiXHgxYlszODsxOzE5Nm1ceDFiWzM4OzU7MTk2bSAgICAg4pyXIFx4MWJbMzg7NTsxOThtQ2hvaWNlICAgXHgxYlszODs1OzIwOG0g4pa2IFx4MWJbMzg7MDsxOTZtICIpKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIAogICAgICAgIGZvciBpIGluIHJhbmdlKGxpbWl0KToKICAgICAgICAgICAgZGF0YT1zdHIocmFuZG9tLmNob2ljZShyYW5nZSgxMDAwMDAwMDAsOTk5OTk5OTk5KSkpCiAgICAgICAgICAgIHVzZXIuYXBwZW5kKGRhdGEpCiAgICBwcmludCgiW2JdICAgIFtyZWQxXVsxXSBbc2VhX2dyZWVuMl1NZXRob2QgQSIpCiAgICBwcmludCgiW2JdICAgIFtyZWQxXVsyXSBbc3ByaW5nX2dyZWVuMV1NZXRob2QgQiIpCiAgICBwcmludChzb3J0LmxpbmUoKSkKICAgIG1ldGg9aW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKQogICAgCiAgICB3aXRoIFRocmVhZFBvb2wobWF4X3dvcmtlcnM9NDApIGFzIGhlcm9uOgogICAgICAgIHNvcnQuY2xlYXIoKQogICAgICAgIHNvcnQubG9nbygpCiAgICAgICAgcHJpbnQoIiBbYl0gICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1Ub3RhbCBVaWQgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdIitzdHIobGVuKHVzZXIpKSkKICAgICAgICBwcmludCgiIFtiXSAgICBbcmVkMV3inJcgW2xpZ2h0X2dyZWVuXUxvZ2luIElkcyBbb3JhbmdlM13ilrYgIFtsaWdodF9ncmVlbl1KdXN0IE5vdyIpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgZm9yIG1hbCBpbiB1c2VyOgogICAgICAgICAgICB1aWQ9c3RhcittYWwKICAgICAgICAgICAgaGVyb24uc3VibWl0KGxvZ2luLHVpZCxtZXRoKQoKCgpkZWYgZmlsZWUoKToKICAgIHNvcnQuY2xlYXIoKQogICAgc29ydC5sb2dvKCkKICAgIHByaW50KCJbYl0gICAgW3JlZDFdW0FdIFtzZWFfZ3JlZW4yXUNyYWNrIEluZGlhbiBGaWxlIikKICAgIHByaW50KCJbYl0gICAgW3JlZDFdW0JdIFtzcHJpbmdfZ3JlZW4xXUNyYWNrIEJEIEZpbGUiKQogICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICBhc2s9aW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKQogICAgaWYgYXNrIGluIFsiMSIsIjAxIiwiYSIsIkEiXToKICAgICAgICBwcmludCgiICAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXVNlbGVjdGVkICBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV1JTkQgRmlsZSBDbG9uZSIpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIHB3eD1bIjA3ODYwNzg2IiwiNTc1NzU3NTEiLCI1NzU3NTc1MiIsIjU3MjczMjAwIiwiNTkwMzkyMDAiLCJmaXJzdDEyMyIsImZpcnN0IDEyMyIsImZpcnN0MTIzNCIsIkZpcnN0MTIzIiwiRmlyc3QxMjM0IiwiZmlyc3RAMTIzIiwiZmlyc3QgbGFzdCIsIkZpcnN0IExhc3QiLCJmaXJzdGxhc3QiLCJmaXJzdGxhc3QxMjMiLCJmaXJzdGxhc3QxMjM0IiwiZmlyc3RAIyIsImZpcnN0QEAiLCJAZmlyc3QiLCJAZmlyc3RAIiwiZmlyc3QxMiJdCiAgICAgICAgCiAgICBlbGlmIGFzayBpbiBbIjIiLCIwMiIsImIiLCJCIl06CiAgICAgICAgcHJpbnQoIiAgICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1TZWxlY3RlZCAgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdQkQgRmlsZSBDbG9uZSIpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIHB3eD1bImZpcnN0MTIiLCJmaXJzdDEyMyIsImZpcnN0MTIzNCIsImZpcnN0MTIzNDUiLCJmaXJzdDEyMzQ1NiIsImZpcnN0bGFzdCIsImZpcnN0bGFzdDEyMyIsImZpcnN0bGFzdDEyMzQiLCJmaXJzdEAxMjMiLCJmaXJzdEAiLCJmaXJzdEBAIiwiZmlyc3RAIyIsIkBmaXJzdCIsIkBmaXJzdEAiLCJmaXJzdGxhc3QxMjM0NSIsImZpcnN0bGFzdEAjIiwiZmlyc3RsYXN0QEAiLCJmaXJzdGxhc3RAIiwiRmlyc3QxMjMiLCJGaXJzdDEyMzQiLCJmaXJzdCBsYXN0IiwiRmlyc3QgTGFzdCIsImxhc3QxMjMiLCJOYW1lIiwibmFtZSIsIm5hbWUxMjMiLCJOYW1lIiwiZmlyc3RsYXN0MTIiLCJGaXJzdExhc3QxMjMiLCJGaXJzdExhc3QxMjM0IiwiRmlyc3RMYXN0QCMiLCJGaXJzdExhc3RAQCJdCiAgICAgICAgCiAgICBlbHNlOgogICAgICAgIHByaW50KCIgICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdU2VsZWN0ZWQgIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXVdyb25nIE9wdGlvbiIpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIGZpbGVlKCkKICAgIHByaW50KCJbYl0gICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdRXhhbXBsZSAgIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXS9zZGNhcmQvRmlsZS50eHQiKQogICAgcGF0aD1zdHIoaW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKSkKICAgIAogICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICB0cnk6CiAgICAgICAgZmlsZT1vcGVuKHBhdGgsInIiKS5yZWFkKCkuc3BsaXRsaW5lcygpCiAgICBleGNlcHQ6CiAgICAgICAgZmlsZWUoKQogICAgcHJpbnQoIltiXSAgICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1BZGQgUGFzcyAgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdKFkvbikiKQogICAgcGE9c3RyKGlucHV0KCJceDFiWzM4OzE7MTk2bVx4MWJbMzg7NTsxOTZtICAgICDinJcgXHgxYlszODs1OzE5OG1DaG9pY2UgICBceDFiWzM4OzU7MjA4bSDilrYgXHgxYlszODswOzE5Nm0gIikpCiAgICBpZiBwYSBpbiBbInkiLCJZIiwieWVzIiwiWWVzIiwiMSJdOgogICAgICAgIHB3eD1bXQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIHByaW50KCJbYl0gICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdQWRkIExpbWl0IFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXUV4YW1wbGUgMTAsIDE1LCAyMCIpCiAgICAgICAgbGltPWludChpbnB1dCgiXHgxYlszODsxOzE5Nm1ceDFiWzM4OzU7MTk2bSAgICAg4pyXIFx4MWJbMzg7NTsxOThtQ2hvaWNlICAgXHgxYlszODs1OzIwOG0g4pa2IFx4MWJbMzg7MDsxOTZtICIpKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIGZvciBpIGluIHJhbmdlKGxpbSk6CiAgICAgICAgICAgIGkrPTEKICAgICAgICAgICAgcHJpbnQoIltiXSAgICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1FeGFtcGxlICAgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdZmlyc3QxMjMsZmlyc3RsYXN0IikKICAgICAgICAgICAgcHg9c3RyKGlucHV0KGYiXHgxYlszODsxOzE5Nm1ceDFiWzM4OzU7MTk2bSAgICAg4pyXIFx4MWJbMzg7NTsxOThtUGFzcyAge2NvbnQoaSl9IFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKSkKICAgICAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgICAgIHB3eC5hcHBlbmQocHgpCiAgICBlbHNlOgogICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICBwcmludCgiW2JdICAgIFtyZWQxXVsxXSBbc2VhX2dyZWVuMl1NZXRob2QgQSIpCiAgICBwcmludCgiW2JdICAgIFtyZWQxXVsyXSBbc3ByaW5nX2dyZWVuMV1NZXRob2QgQiIpCiAgICBwcmludChzb3J0LmxpbmUoKSkKICAgIG1ldGg9aW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKQogICAgCiAgICB3aXRoIFRocmVhZFBvb2wobWF4X3dvcmtlcnM9ODApIGFzIGhlcm9uOgogICAgICAgIHNvcnQuY2xlYXIoKQogICAgICAgIHNvcnQubG9nbygpCiAgICAgICAgcHJpbnQoIiBbYl0gICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1Ub3RhbCBVaWQgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdIitzdHIobGVuKGZpbGUpKSkKICAgICAgICBwcmludCgiIFtiXSAgICBbcmVkMV3inJcgW2xpZ2h0X2dyZWVuXU1ldGhvZCAgICBbb3JhbmdlM13ilrYgIFtsaWdodF9ncmVlbl1NIittZXRoKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIGZvciBtYWwgaW4gZmlsZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdWlkPW1hbC5zcGxpdCgifCIpWzBdCiAgICAgICAgICAgICAgICBuYW1lPW1hbC5zcGxpdCgifCIpWzFdCiAgICAgICAgICAgICAgICBoZXJvbi5zdWJtaXQoZmlsZV9zdWIsdWlkLHB3eCxuYW1lLG1ldGgsZmlsZSkKICAgICAgICAgICAgZXhjZXB0OnBhc3MKCgoKZGVmIGZpbGVfc3ViKHVpZCxwd3gsbmFtZSxtZXRoLGZpbGUpOgogICAgZ2xvYmFsIG9rcyxsb29wCiAgICBTZXNzaW9uPXJlcXVlc3RzLnNlc3Npb24oKQogICAgdHJ5OgogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZiJcclx4MWJbMzg7MTsxOTZtXHgxYlszODswOzE5Nm3ilJRceDFiWzM4OzE7MTk2bVx4MWJbMzg7MDsxOTZtXDAzM1szODs1OzQ2bVt7c29ydC5jb2xvcigpfXt0b2RheX1cMDMzWzM4OzU7NDZtXVx4MWJbMTs5N20tXDAzM1szODs1OzQ2bVtceDFiWzE7OTBte2xvb3B9XDAzM1szODs1OzQ2bV1ceDFiWzE7OTdtLVwwMzNbMzg7NTs0Nm1bXHgxYlsxOzkwbU9LOntzdHIobGVuKG9rcykpfVwwMzNbMzg7NTs0Nm1dXHgxYlsxOzk3bS1cMDMzWzM4OzU7NDZtW1x4MWJbMTs5MG17J3s6LjElfScuZm9ybWF0KGxvb3AvbGVuKGZpbGUpKX1cMDMzWzM4OzU7NDZtXSBcciIpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgZnMgPSBuYW1lLnNwbGl0KCcgJylbMF0KICAgICAgICB0cnk6CiAgICAgICAgICAgIGxzID0gbmFtZS5zcGxpdCgnICcpWzFdCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBscyA9IGZzCiAgICAgICAgZm9yIHB3IGluIHB3eDoKICAgICAgICAgICAgcHMgPSBwdy5yZXBsYWNlKCdmaXJzdCcsZnMubG93ZXIoKSkucmVwbGFjZSgnRmlyc3QnLGZzKS5yZXBsYWNlKCdsYXN0Jyxscy5sb3dlcigpKS5yZXBsYWNlKCdMYXN0JyxscykucmVwbGFjZSgnTmFtZScsbmFtZSkucmVwbGFjZSgnbmFtZScsbmFtZS5sb3dlcigpKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgbWV0aCBpbiBbIjEiLCIwMSIsIkEiLCJhIl06CiAgICAgICAgICAgICAgICBhZ2VudD11c2VyYWcxKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGFnZW50PXVzZXJhZzIoKQogICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAiYWRpZCI6IHN0cih1dWlkLnV1aWQ0KCkpLAogICAgICAgICAgICAiZm9ybWF0IjogImpzb24iLAogICAgICAgICAgICAiZGV2aWNlX2lkIjogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgICAgICJjcGwiOiAidHJ1ZSIsCiAgICAgICAgICAgICJmYW1pbHlfZGV2aWNlX2lkIjogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgICAgICJjcmVkZW50aWFsc190eXBlIjogImRldmljZV9iYXNlZF9sb2dpbl9wYXNzd29yZCIsCiAgICAgICAgICAgICJlcnJvcl9kZXRhaWxfdHlwZSI6ICJidXR0b25fd2l0aF9kaXNhYmxlZCIsCiAgICAgICAgICAgICJzb3VyY2UiOiAiZGV2aWNlX2Jhc2VkX2xvZ2luIiwKICAgICAgICAgICAgImVtYWlsIjogdWlkLAogICAgICAgICAgICAicGFzc3dvcmQiOiBwcywKICAgICAgICAgICAgImFjY2Vzc190b2tlbiI6ICIzNTA2ODU1MzE3MjglN0M2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMiIsCiAgICAgICAgICAgICJnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMiOiAiMSIsCiAgICAgICAgICAgICJtZXRhX2luZl9mYm1ldGEiOiAiIiwKICAgICAgICAgICAgImFkdmVydGlzZXJfaWQiOiBzdHIodXVpZC51dWlkNCgpKSwKICAgICAgICAgICAgImN1cnJlbnRseV9sb2dnZWRfaW5fdXNlcmlkIjogIjAiLAogICAgICAgICAgICAibG9jYWxlIjogImVuX0dCIiwKICAgICAgICAgICAgImNsaWVudF9jb3VudHJ5X2NvZGUiOiAiR0IiLAogICAgICAgICAgICAibWV0aG9kIjogImF1dGgubG9naW4iLAogICAgICAgICAgICAiZmJfYXBpX3JlcV9mcmllbmRseV9uYW1lIjogImF1dGhlbnRpY2F0ZSIsCiAgICAgICAgICAgICJmYl9hcGlfY2FsbGVyX2NsYXNzIjogImNvbS5mYWNlYm9vay5hY2NvdW50LmxvZ2luLnByb3RvY29sLkZiNGFBdXRoSGFuZGxlciIsCiAgICAgICAgICAgICJhcGlfa2V5IjogIjg4MmE4NDkwMzYxZGE5ODcwMmJmOTdhMDIxZGRjMTRkIn0KICAgICAgICAgICAgaGVhZCA9IHsKICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiBhZ2VudCwKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAogICAgICAgICAgICAnSG9zdCc6ICdncmFwaC5mYWNlYm9vay5jb20nLAogICAgICAgICAgICAnWC1GQi1OZXQtSE5JJzogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLAogICAgICAgICAgICAnWC1GQi1TSU0tSE5JJzogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLAogICAgICAgICAgICAnWC1GQi1Db25uZWN0aW9uLVR5cGUnOiAnTU9CSUxFLkxURScsCiAgICAgICAgICAgICdYLVRpZ29uLUlzLVJldHJ5JzogJ0ZhbHNlJywKICAgICAgICAgICAgJ1gtZmItc2Vzc2lvbi1pZCc6ICduaWQ9amlaK3lOTkJnYndDO3BpZD1NYWluO3RpZD0xMzI7bmM9MTtmYz0wO2JjPTA7Y2lkPWQyOWQ2N2QzN2VjYTM4NzQ4MmE4YTViNzQwZjg0ZjYyJywKICAgICAgICAgICAgJ1gtZmItZGV2aWNlLWdyb3VwJzogJzUxMjAnLAogICAgICAgICAgICAnWC1GQi1GcmllbmRseS1OYW1lJzogJ1ZpZXdlclJlYWN0aW9uc011dGF0aW9uJywKICAgICAgICAgICAgJ1gtRkItUmVxdWVzdC1BbmFseXRpY3MtVGFncyc6ICdncmFwaHNlcnZpY2UnLAogICAgICAgICAgICAnWC1GQi1IVFRQLUVuZ2luZSc6ICdMaWdlcicsCiAgICAgICAgICAgICdYLUZCLUNsaWVudC1JUCc6ICdUcnVlJywKICAgICAgICAgICAgJ1gtRkItU2VydmVyLUNsdXN0ZXInOiAnVHJ1ZScsCiAgICAgICAgICAgICdYLWZiLWNvbm5lY3Rpb24tdG9rZW4nOiAnZDI5ZDY3ZDM3ZWNhMzg3NDgyYThhNWI3NDBmODRmNjInLH0KICAgICAgICAgICAgdXJsMT0gJ2h0dHBzOi8vYi1ncmFwaC5mYWNlYm9vay5jb20vYXV0aC9sb2dpbicKICAgICAgICAgICAgcG8gPSBTZXNzaW9uLnBvc3QodXJsPXVybDEsZGF0YT1kYXRhLGhlYWRlcnM9aGVhZCxhbGxvd19yZWRpcmVjdHM9RmFsc2UpLmpzb24oKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgInNlc3Npb25fa2V5IiBpbiBwbzoKICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkKQogICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihpWyJuYW1lIl0rIj0iK2lbInZhbHVlIl0gZm9yIGkgaW4gcG9bInNlc3Npb25fY29va2llcyJdKQogICAgICAgICAgICAgICAgcHJpbnQoZiJcclxyW3JldmVyc2Ugd2hpdGVdW1RVU0FSLU9LXVsvcmV2ZXJzZSB3aGl0ZV0gW2N5YW5de3VpZH0gW3doaXRlXXxbL3doaXRlXVticmlnaHRfcmVkXSB7cHN9ICAgICBcblt3aGl0ZV1b8J+MuitbYm9sZCBjeWFuXXtzdHIobGVuKG9rcykpfVsvYm9sZCBjeWFuXVt3aGl0ZV1dW3BhbGVfZ3JlZW4xXXtjb2tpfSBcbntzb3J0LmxpbmUoKX0iKQogICAgICAgICAgICAgICAgb3BlbigiL3NkY2FyZC9UVVNBUl9maWxlLnR4dCIsImEiKS53cml0ZSh1aWQrInwiK3BzKyJ8Iitjb2tpKyJcbiIpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbGlmICJQbGVhc2UgQ29uZmlybSBFbWFpbCIgaW4gc3RyKHBvKToKICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkKQogICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihpWyJuYW1lIl0rIj0iK2lbInZhbHVlIl0gZm9yIGkgaW4gcG9bInNlc3Npb25fY29va2llcyJdKQogICAgICAgICAgICAgICAgcHJpbnQoZiJcclxyW3JldmVyc2Ugd2hpdGVdW1RVU0FSLU9LXVsvcmV2ZXJzZSB3aGl0ZV0gW2N5YW5de3VpZH0gW3doaXRlXXxbL3doaXRlXVticmlnaHRfcmVkXSB7cHN9ICAgICBcblt3aGl0ZV1b8J+MuitbYm9sZCBjeWFuXXtzdHIobGVuKG9rcykpfVsvYm9sZCBjeWFuXVt3aGl0ZV1dW3BhbGVfZ3JlZW4xXXtjb2tpfSBcbntzb3J0LmxpbmUoKX0iKQogICAgICAgICAgICAgICAgb3BlbigiL3NkY2FyZC9BU1JBRlVMX2ZpbGUudHh0IiwiYSIpLndyaXRlKHVpZCsifCIrcHMrInwiK2Nva2krIlxuIikKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6Y29udGludWUgCiAgICAgICAgbG9vcCs9MQogICAgZXhjZXB0OgogICAgICAgIAogICAgICAgIHRpbWUuc2xlZXAoMzApCgoKZGVmIHJhbigpOgogICAgdXNlcj1bXQogICAgc29ydC5jbGVhcigpCiAgICBzb3J0LmxvZ28oKQogICAgcHJpbnQoIltiXSAgICBbcmVkMV1bQV0gW3NlYV9ncmVlbjJdSU5EIE51bWJlciBDbG9uZSIpCiAgICBwcmludCgiW2JdICAgIFtyZWQxXVtCXSBbc3ByaW5nX2dyZWVuMV1CRCBOdW1iZXIgQ2xvbmUiKQogICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICBhc2s9aW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKQogICAgaWYgYXNrIGluIFsiMSIsIjAxIiwiYSIsIkEiXToKICAgICAgICBwcmludCgiIFtiXSAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXVNlbGVjdGVkICBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV1JTkQgTnVtYmVyIikKICAgICAgICBwcmludChzb3J0LmxpbmUoKSkKICAgICAgICBwcmludCgiW2JdICAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXUV4YW1wbGUgICBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV0rOTE2MjksICs5MTcwMSIpCiAgICAgICAgY29kZT1zdHIoaW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKSkKICAgICAgICBwcmludChzb3J0LmxpbmUoKSkKICAgICAgICBwcmludCgiW2JdICAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXUV4YW1wbGUgICBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV0xMDAwMDAsIDIwMDAwMCIpCiAgICAgICAgbGltaXQ9aW50KGlucHV0KCJceDFiWzM4OzE7MTk2bVx4MWJbMzg7NTsxOTZtICAgICDinJcgXHgxYlszODs1OzE5OG1DaG9pY2UgICBceDFiWzM4OzU7MjA4bSDilrYgXHgxYlszODswOzE5Nm0gIikpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGltaXQpOgogICAgICAgICAgICBkYXRhPXN0cihyYW5kb20uY2hvaWNlKHJhbmdlKDEwMDAwMDAsOTk5OTk5OSkpKQogICAgICAgICAgICB1c2VyLmFwcGVuZChkYXRhKQogICAgZWxzZToKICAgICAgICBwcmludCgiIFtiXSAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXVNlbGVjdGVkICBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV1CRCBOdW1iZXIiKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIHByaW50KCJbYl0gICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdRXhhbXBsZSAgIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXTAxNywgMDE4LCAwMTkiKQogICAgICAgIGNvZGU9c3RyKGlucHV0KCJceDFiWzM4OzE7MTk2bVx4MWJbMzg7NTsxOTZtICAgICDinJcgXHgxYlszODs1OzE5OG1DaG9pY2UgICBceDFiWzM4OzU7MjA4bSDilrYgXHgxYlszODswOzE5Nm0gIikpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgcHJpbnQoIltiXSAgICAgW3JlZDFd4pyXIFtjaGFydHJldXNlMV1FeGFtcGxlICAgW29yYW5nZTNd4pa2ICBbY2hhcnRyZXVzZTFdMTAwMDAwLCAyMDAwMDAiKQogICAgICAgIGxpbWl0PWludChpbnB1dCgiXHgxYlszODsxOzE5Nm1ceDFiWzM4OzU7MTk2bSAgICAg4pyXIFx4MWJbMzg7NTsxOThtQ2hvaWNlICAgXHgxYlszODs1OzIwOG0g4pa2IFx4MWJbMzg7MDsxOTZtICIpKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIAogICAgICAgIGZvciBpIGluIHJhbmdlKGxpbWl0KToKICAgICAgICAgICAgZGF0YT1zdHIocmFuZG9tLmNob2ljZShyYW5nZSgxMDAwMDAwMCw5OTk5OTk5OSkpKQogICAgICAgICAgICB1c2VyLmFwcGVuZChkYXRhKQogICAgcHJpbnQoIltiXSAgICBbcmVkMV1bMV0gW3NlYV9ncmVlbjJdTWV0aG9kIEEiKQogICAgcHJpbnQoIltiXSAgICBbcmVkMV1bMl0gW3NwcmluZ19ncmVlbjFdTWV0aG9kIEIiKQogICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICBtZXRoPWlucHV0KCJceDFiWzM4OzE7MTk2bVx4MWJbMzg7NTsxOTZtICAgICDinJcgXHgxYlszODs1OzE5OG1DaG9pY2UgICBceDFiWzM4OzU7MjA4bSDilrYgXHgxYlszODswOzE5Nm0gIikKICAgIAogICAgd2l0aCBUaHJlYWRQb29sKG1heF93b3JrZXJzPTYwKSBhcyBoZXJvbjoKICAgICAgICBzb3J0LmNsZWFyKCkKICAgICAgICBzb3J0LmxvZ28oKQogICAgICAgIHByaW50KCIgW2JdICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdVG90YWwgVWlkIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXSIrc3RyKGxlbih1c2VyKSkpCiAgICAgICAgcHJpbnQoZiIgW2JdICAgIFtyZWQxXeKclyBbbGlnaHRfZ3JlZW5dQ29kL01ldCAgIFtvcmFuZ2UzXeKWtiAgW2xpZ2h0X2dyZWVuXXtjb2RlfS9NIittZXRoKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIGZvciB4ZCBpbiB1c2VyOgogICAgICAgICAgICB1aWQ9Y29kZSt4ZAogICAgICAgICAgICBpZiBhc2sgaW4gWyIxIiwiMDEiLCJhIiwiQSJdOgogICAgICAgICAgICAgICAgcHd4PVsiNTc1NzU3NTEiLCI1NzU3NTc1MiIsIjU3MjczMjAwIiwiNTkwMzkyMDAiLCIwNzg2MDc4NiIsdWlkLHhkLHhkWzE6XV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHB3eD1bdWlkLHVpZFs6Nl0sdWlkWzo3XSx1aWRbOjhdLHhkLHhkWzE6XSx4ZFsyOl1dCiAgICAgICAgICAgIGhlcm9uLnN1Ym1pdChyZW5fc3ViLHVpZCxwd3gsbWV0aCx1c2VyKQoKCmRlZiByZW5fc3ViKHVpZCxwd3gsbWV0aCx1c2VyKToKICAgIGdsb2JhbCBva3MsbG9vcAogICAgdHJ5OgogICAgICAgIFNlc3Npb249cmVxdWVzdHMuc2Vzc2lvbigpCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyXHgxYlszODsxOzE5Nm1ceDFiWzM4OzA7MTk2beKUlFx4MWJbMzg7MTsxOTZtXHgxYlszODswOzE5Nm1cMDMzWzM4OzU7NDZtW3tzb3J0LmNvbG9yKCl9e3RvZGF5fVwwMzNbMzg7NTs0Nm1dXHgxYlsxOzk3bS1cMDMzWzM4OzU7NDZtW1x4MWJbMTs5MG17bG9vcH1cMDMzWzM4OzU7NDZtXVx4MWJbMTs5N20tXDAzM1szODs1OzQ2bVtceDFiWzE7OTBtT0s6e3N0cihsZW4ob2tzKSl9XDAzM1szODs1OzQ2bV1ceDFiWzE7OTdtLVwwMzNbMzg7NTs0Nm1bXHgxYlsxOzkwbXsnezouMSV9Jy5mb3JtYXQobG9vcC9sZW4odXNlcikpfVwwMzNbMzg7NTs0Nm1dIFxyIikKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcHMgaW4gcHd4OgogICAgICAgICAgICAKICAgICAgICAgICAgaWYgbWV0aCBpbiBbIjEiLCIwMSIsIkEiLCJhIl06CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGFnZW50PXVzZXJhZzEoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBhZ2VudD11c2VyYWcyKCkKICAgICAgICAgICAgZGF0YT17CiAgICAgICAgICAgICdhZGlkJzogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgICAgICdmb3JtYXQnOiAnanNvbicsCiAgICAgICAgICAgICdkZXZpY2VfaWQnOiBzdHIodXVpZC51dWlkNCgpKSwKICAgICAgICAgICAgJ2VtYWlsJzogdWlkLAogICAgICAgICAgICAncGFzc3dvcmQnOiBwcywKICAgICAgICAgICAgJ2dlbmVyYXRlX2FuYWx5dGljc19jbGFpbXMnOiAnMScsCiAgICAgICAgICAgICdjb21tdW5pdHlfaWQnOiAnJywKICAgICAgICAgICAgJ2NwbCc6ICd0cnVlJywKICAgICAgICAgICAgJ3RyeV9udW0nOiAnMScsCiAgICAgICAgICAgICdmYW1pbHlfZGV2aWNlX2lkJzogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgICAgICdjcmVkZW50aWFsc190eXBlJzogJ3Bhc3N3b3JkJywKICAgICAgICAgICAgJ3NvdXJjZSc6ICdsb2dpbicsCiAgICAgICAgICAgICdlcnJvcl9kZXRhaWxfdHlwZSc6ICdidXR0b25fd2l0aF9kaXNhYmxlZCcsCiAgICAgICAgICAgICdlbnJvbGxfbWlzYXV0aCc6ICdmYWxzZScsCiAgICAgICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsCiAgICAgICAgICAgICdnZW5lcmF0ZV9tYWNoaW5lX2lkJzogJzEnLAogICAgICAgICAgICAnY3VycmVudGx5X2xvZ2dlZF9pbl91c2VyaWQnOiAnMCcsCiAgICAgICAgICAgICdsb2NhbGUnOiAnZW5fR0InLAogICAgICAgICAgICAnY2xpZW50X2NvdW50cnlfY29kZSc6ICdHQicsCiAgICAgICAgICAgICdmYl9hcGlfcmVxX2ZyaWVuZGx5X25hbWUnOiAnYXV0aGVudGljYXRlJ30KICAgICAgICAgICAgaGVhZD17CiAgICAgICAgICAgICdVc2VyLUFnZW50JzogYWdlbnQsCiAgICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAgJ2d6aXAsIGRlZmxhdGUnLAogICAgICAgICAgICAnQWNjZXB0JzogJyovKicsCiAgICAgICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLAogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdPQXV0aCAzNTA2ODU1MzE3Mjh8NjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInLAogICAgICAgICAgICAnWC1GQi1GcmllbmRseS1OYW1lJzogJ2F1dGhlbnRpY2F0ZScsCiAgICAgICAgICAgICdYLUZCLUNvbm5lY3Rpb24tQmFuZHdpZHRoJzogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLAogICAgICAgICAgICAnWC1GQi1OZXQtSE5JJzogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLAogICAgICAgICAgICAnWC1GQi1TSU0tSE5JJzogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLAogICAgICAgICAgICAnWC1GQi1Db25uZWN0aW9uLVR5cGUnOiAndW5rbm93bicsCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgICAgICAgICAgJ1gtRkItSFRUUC1FbmdpbmUnOiAnTGlnZXInfQogICAgICAgICAgICB1cmwxPSAnaHR0cHM6Ly9iLWdyYXBoLmZhY2Vib29rLmNvbS9hdXRoL2xvZ2luJwogICAgICAgICAgICBwbyA9IFNlc3Npb24ucG9zdCh1cmw9dXJsMSxkYXRhPWRhdGEsaGVhZGVycz1oZWFkLGFsbG93X3JlZGlyZWN0cz1GYWxzZSkuanNvbigpCiAgICAgICAgICAgIGlmICJzZXNzaW9uX2tleSIgaW4gcG86CiAgICAgICAgICAgICAgICB1aWQ9cG9bInVpZCJdCiAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCkKICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oaVsibmFtZSJdKyI9IitpWyJ2YWx1ZSJdIGZvciBpIGluIHBvWyJzZXNzaW9uX2Nvb2tpZXMiXSkKICAgICAgICAgICAgICAgIHByaW50KGYiXHJccltyZXZlcnNlIHdoaXRlXVtUVVNBUi1PS11bL3JldmVyc2Ugd2hpdGVdIFtjeWFuXXt1aWR9IFt3aGl0ZV18Wy93aGl0ZV1bYnJpZ2h0X3JlZF0ge3BzfSAgICAgXG5bd2hpdGVdW/CfjaorW2JvbGQgY3lhbl17c3RyKGxlbihva3MpKX1bL2JvbGQgY3lhbl1bd2hpdGVdXVtwYWxlX2dyZWVuMV17Y29raX0gXG57c29ydC5saW5lKCl9IikKICAgICAgICAgICAgICAgIG9wZW4oIi9zZGNhcmQvVFVTQVJfbnVtYmVyLnR4dCIsImEiKS53cml0ZSh1aWQrInwiK3BzKyJ8Iitjb2tpKyJcbiIpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbGlmICJQbGVhc2UgQ29uZmlybSBFbWFpbCIgaW4gc3RyKHBvKToKICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkKQogICAgICAgICAgICAgICAgdWlkPXBvWyJ1aWQiXQogICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihpWyJuYW1lIl0rIj0iK2lbInZhbHVlIl0gZm9yIGkgaW4gcG9bInNlc3Npb25fY29va2llcyJdKQogICAgICAgICAgICAgICAgcHJpbnQoZiJcclxyW3JldmVyc2Ugd2hpdGVdW1RVU0FSLU9LXVsvcmV2ZXJzZSB3aGl0ZV0gW2N5YW5de3VpZH0gW3doaXRlXXxbL3doaXRlXVticmlnaHRfcmVkXSB7cHN9ICAgICBcblt3aGl0ZV1b8J+NqitbYm9sZCBjeWFuXXtzdHIobGVuKG9rcykpfVsvYm9sZCBjeWFuXVt3aGl0ZV1dW3BhbGVfZ3JlZW4xXXtjb2tpfSBcbntzb3J0LmxpbmUoKX0iKQogICAgICAgICAgICAgICAgb3BlbigiL3NkY2FyZC9UVVNBUl9udW1iZXIudHh0IiwiYSIpLndyaXRlKHVpZCsifCIrcHMrInwiK2Nva2krIlxuIikKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsc2U6Y29udGludWUKICAgICAgICBsb29wKz0xCiAgICBleGNlcHQ6dGltZS5zbGVlcCgzMCkKCgoKCmRlZiBtYWluKCk6CiAgICBpbmZvKCkKICAgIHNvcnQuY2xlYXIoKQogICAgc29ydC5sb2dvKCkKICAgIHByaW50KCJbYl0gICAgW3JlZDFdW0FdIFtjaGFydHJldXNlMV1GaWxlIENsb25lIFtibHVlXVtbZ3JlZW5dQltyZWQxXURbYmx1ZV0tW29yYW5nZTFdSVt3aGl0ZV1OW2JyaWdodF9ncmVlbl1EW2JsdWVdXSIpCiMgICAgcHJpbnQoIltiXSAgICBbcmVkMV1bQl0gW3NwcmluZ19ncmVlbjJdT2xkIFVpZCBDbG9uZSIpCiMgICAgcHJpbnQoIltiXSAgICBbcmVkMV1bQ10gW3NwcmluZ19ncmVlbjFdUmFuZG9tIChtb3JlLi4yKSIpCiAgICAKICAgIHByaW50KHNvcnQubGluZSgpKQogICAgZmFzdF9jaG9pY2U9aW5wdXQoIlx4MWJbMzg7MTsxOTZtXHgxYlszODs1OzE5Nm0gICAgIOKclyBceDFiWzM4OzU7MTk4bUNob2ljZSAgIFx4MWJbMzg7NTsyMDhtIOKWtiBceDFiWzM4OzA7MTk2bSAiKQogICAgaWYgZmFzdF9jaG9pY2UgaW4gWyIxIiwiMDEiLCJhIiwiQSJdOgogICAgICAgIHByaW50KCIgICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdU2VsZWN0ZWQgIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXUZpbGUgQ2xvbmUiKQogICAgICAgIHByaW50KHNvcnQubGluZSgpKQogICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICBmaWxlZSgpCiAgICBlbGlmIGZhc3RfY2hvaWNlIGluIFsiMiIsIjAyIiwiYiIsIkIiXToKICAgICAgICBwcmludCgiICAgICBbcmVkMV3inJcgW2NoYXJ0cmV1c2UxXVNlbGVjdGVkICBbb3JhbmdlM13ilrYgIFtjaGFydHJldXNlMV1PbGQgVWlkIENyYWNrIikKICAgICAgICBwcmludChzb3J0LmxpbmUoKSkKICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgb2xkKCkKICAgIGVsaWYgZmFzdF9jaG9pY2UgaW4gWyIzIiwiMDMiLCJjIiwiQyJdOgogICAgICAgIHByaW50KCIgICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdU2VsZWN0ZWQgIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXVJhbmRvbSBDcmFjayIpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIHJhbigpCiAgICBlbHNlOgogICAgICAgIHByaW50KCIgICAgIFtyZWQxXeKclyBbY2hhcnRyZXVzZTFdU2VsZWN0ZWQgIFtvcmFuZ2UzXeKWtiAgW2NoYXJ0cmV1c2UxXVdyb25nIE9wdGlvbiIpCiAgICAgICAgcHJpbnQoc29ydC5saW5lKCkpCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIG1haW4oKQoKCmRlZiBsb2dpbih1aWQsbWV0aCk6CiAgICBnbG9iYWwgb2tzLGxvb3AKICAgIFNlc3Npb249cmVxdWVzdHMuc2Vzc2lvbigpCiAgICB0cnk6CiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyICBceDFiWzM4OzE7MTk2bSAgXHgxYlszODswOzE5Nm3ilJRcMDMzWzM4OzU7NDZtW3tzb3J0LmNvbG9yKCl9QVNSQUZVTC1YRFwwMzNbMzg7NTs0Nm1dfltceDFiWzE7OTdte2xvb3B9LU17bWV0aH1cMDMzWzM4OzU7NDZtXS1bXHgxYlsxOzkwbU9LOntzdHIobGVuKG9rcykpfVwwMzNbMzg7NTs0Nm1dIFxyIikKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcHcgaW4gWyIxMjM0NTYiLCIxMjM0NTY3IiwiMTIzNDU2NzgiLCIxMjM0NTY3ODkiXToKICAgICAgICAgICAgaWYgbWV0aCBpbiBbIjEiLCIwMSIsIkEiLCJhIl06CiAgICAgICAgICAgICAgICBhZ2VudD11YSgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhZ2VudD1zYW1zdW5nKCkKICAgICAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgIngtZmItY29ubmVjdGlvbi1iYW5kd2lkdGgiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAwMDAuMCwgMzAwMDAwMDAuMCkpLCAKICAgICAgICAgICAgIngtZmItc2ltLWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwgCiAgICAgICAgICAgICJ4LWZiLW5ldC1obmkiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAsIDQwMDAwKSksIAogICAgICAgICAgICAieC1mYi1jb25uZWN0aW9uLXF1YWxpdHkiOiAiRVhDRUxMRU5UIiwKICAgICAgICAgICAgIngtZmItY29ubmVjdGlvbi10eXBlIjogImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsCiAgICAgICAgICAgICJ1c2VyLWFnZW50IjogYWdlbnQsIAogICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsIAogICAgICAgICAgICAieC1mYi1odHRwLWVuZ2luZSI6ICJMaWdlciJ9CiAgICAgICAgICAgIHJwPVNlc3Npb24uZ2V0KCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9mb3JtYXQ9anNvbiZlbWFpbD0iK3N0cih1aWQpKyImcGFzc3dvcmQ9IitzdHIocHcpKyImY3JlZGVudGlhbHNfdHlwZT1kZXZpY2VfYmFzZWRfbG9naW5fcGFzc3dvcmQmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmZXJyb3JfZGV0YWlsX3R5cGU9YnV0dG9uX3dpdGhfZGlzYWJsZWQmc291cmNlPWRldmljZV9iYXNlZF9sb2dpbiZtZXRhX2luZl9mYm1ldGE9JTIwwqR0bHlfbG9nZ2VkX2luX3VzZXJpZD0wJm1ldGhvZD1HRVQmbG9jYWxlPWVuX1VTJmNsaWVudF9jb3VudHJ5X2NvZGU9VVMmZmJfYXBpX2NhbGxlcl9jbGFzcz1jb20uZmFjZWJvb2suZm9zLmhlYWRlcnN2Mi5mYjRhb3JjYS5IZWFkZXJzVjJDb25maWdGZXRjaFJlcXVlc3RIYW5kbGVyJmFjY2Vzc190b2tlbj0zNTA2ODU1MzE3Mjh8NjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzImZmJfYXBpX3JlcV9mcmllbmRseV9uYW1lPWF1dGhlbnRpY2F0ZSZjcGw9dHJ1ZSIsIGhlYWRlcnM9aGVhZGVycykuanNvbigpCiAgICAgICAgICAgIGlmICJzZXNzaW9uX2tleSIgaW4gcnA6CiAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCkKICAgICAgICAgICAgICAgIHByaW50KGYiXHJccltiXSAgICBbYnJpZ2h0X3doaXRlXeKUnVtyZWQxXeKepFtzcHJpbmdfZ3JlZW4xXVtbZGVlcF9waW5rMl1PS1tzcHJpbmdfZ3JlZW4xXV0gW2dyZWVuX3llbGxvd117dWlkfSBbcmVkM13igKIgW3NwcmluZ19ncmVlbjFde3B3fSIpCiAgICAgICAgICAgICAgICBvcGVuKCIvc2RjYXJkL0FTUkFGVUxfb2xkLnR4dCIsImEiKS53cml0ZSh1aWQrInwiK3B3KyJcbiIpCiAgICAgICAgICAgICAgICBicmVhayAKICAgICAgICAgICAgZWxpZiAiUGxlYXNlIENvbmZpcm0gRW1haWwiIGluIHN0cihycCk6CiAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCkKICAgICAgICAgICAgICAgIHByaW50KGYiXHJccltiXSAgICBbYnJpZ2h0X3doaXRlXeKUnVtyZWQxXeKepFtzcHJpbmdfZ3JlZW4xXVtbZGVlcF9waW5rMl1PS1tzcHJpbmdfZ3JlZW4xXV0gW2dyZWVuX3llbGxvd117dWlkfSBbcmVkM13igKIgW3NwcmluZ19ncmVlbjFde3B3fSIpCiAgICAgICAgICAgICAgICBvcGVuKCIvc2RjYXJkL0FTUkFGVUxfb2xkLnR4dCIsImEiKS53cml0ZSh1aWQrInwiK3B3KyJcbiIpCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAKICAgICAgICAgICAgZWxzZTpjb250aW51ZQogICAgICAgIGxvb3ArPTEKICAgIGV4Y2VwdDoKICAgICAgICB0aW1lLnNsZWVwKDMwKQoKCgptYWluKCk='))